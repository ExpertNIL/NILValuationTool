<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NIL Program Simulator — obfuscated</title>
<style>
  :root{ --bg:#1a1a1a; --card:#111; --ink:#eaeaea; --muted:#a7a7a7; --accent:#ffffff; --line:#2a2a2a; --brand:#8affc1; --warn:#ffd166; --danger:#ff5c5c; --ok:#8aff8a; }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.45;padding:22px}
  .logo{max-width:240px;opacity:.95;margin:6px 0 18px 4px}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:22px;align-items:start}
  .card{background:var(--card);border-radius:18px;padding:18px;border:1px solid var(--line);box-shadow:0 10px 40px rgba(0,0,0,.35)}
  h1{margin:6px 0 12px;font-size:26px;letter-spacing:.2px}
  h2{margin:2px 0 10px;font-size:18px;color:var(--ink)}
  h3{margin:10px 0 6px;font-size:14px;color:var(--muted);font-weight:600;text-transform:uppercase;letter-spacing:.12em}
  label{display:block;font-size:13px;color:var(--muted);margin:10px 0 6px}
  input,select{width:100%;padding:12px 14px;border-radius:12px;background:#171717;color:var(--ink);border:1px solid #2e2e2e;outline:none}
  input[type="number"]{appearance:textfield}
  .row{display:flex;gap:10px}
  .grow{flex:1}
  .button{padding:12px 14px;border-radius:14px;border:1px solid #2d2d2d;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
  .button.ghost{background:#171717;color:var(--ink)}
  .button.warn{background:var(--warn);color:#000}
  .button.danger{background:var(--danger);color:#000}
  .button.ok{background:var(--ok);color:#000}
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#1d1d1d;border:1px solid var(--line);font-size:12px;color:var(--muted)}
  .stack{display:flex;flex-direction:column;gap:10px}
  .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:10px;margin-top:10px}
  .item{padding:10px;border:1px solid var(--line);border-radius:12px;background:#121212}
  .item.sel{outline:2px solid var(--brand)}
  .tiny{font-size:12px;color:var(--muted)}
  .mono{font-variant-numeric:tabular-nums}
  .divider{height:1px;background:var(--line);margin:12px 0}
  .right{display:flex;justify-content:flex-end;gap:10px}
  .bar{height:10px;background:#222;border:1px solid #333;border-radius:999px;overflow:hidden}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,#c6ffdd,#fbd786,#f7797d)}
  .tag{font-size:11px;color:#111;background:var(--ink);border-radius:999px;padding:3px 8px;margin-left:6px}
  .kpi{font-size:20px;font-weight:800}
  .muted{color:var(--muted)}
  .nowrap{white-space:nowrap}
  .sticky{position:sticky;top:10px}
  #panelPortal{margin-top:20px}
  select option,select optgroup{background:#fff;color:#000}
  .big-season{padding:24px}
  .big-season .kpi{font-size:28px}
  .iconbtn{border:none;background:#222;color:#eee;border:1px solid #333;padding:6px 10px;border-radius:10px;cursor:pointer}
  .iconbtn:hover{background:#2a2a2a}
  /* feedback colors */
  .oktext{color:var(--ok);font-weight:600}
  .rejtext{color:var(--danger);font-weight:600}
  .flags{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .ftag{background:#0f1a12;color:#b7ffcb;border:1px solid #234; padding:6px 10px; border-radius:999px; font-size:12px}
  .ftag.win{background:#101a10;color:#caffca;border-color:#2a4}

  /* === Draggable Portal Panel === */
  #panelPortal.draggable {
    position: fixed !important;
    top: 84px; 
    left: 64px;
    width: min(640px, 92vw);
    max-height: 82vh;
    overflow: auto;
    z-index: 9999;
    box-shadow: 0 16px 60px rgba(0,0,0,.6);
    cursor: grab;
  }
  #panelPortal.dragging { cursor: grabbing; }
  #panelPortal .drag-handle {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
  }

</style>
</head>
<body>
  <img class="logo" src="logo.png" alt="ExpertNIL"/>

  <div class="grid">
    <section class="card sticky">
      <h1>NIL Program Simulator</h1>
      <label>Select Program</label>
      <select id="programSelect"></select>

      <div id="programOverview" class="stack" style="margin-top:12px">
        <div><span class="pill">Last year’s record</span><div class="kpi mono" id="progRecord">--</div></div>
        <div><span class="pill">Current head coach</span><div class="kpi" id="progCoach">--</div></div>
        <div class="row" style="gap:12px">
          <div class="grow"><span class="pill">Total NIL (est.)</span><div class="kpi mono" id="progTotal">--</div></div>
          <div class="grow"><span class="pill">Portal budget (60%)</span><div class="kpi mono" id="progPortal">--</div></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="stack">
        <button class="button" id="btnGenRosters">Generate Rosters</button>
        <button class="button ghost" id="btnEnterPortal" disabled>Enter the Transfer Portal</button>
        <button class="button warn" id="btnNextWeek" disabled>Next Week (1/4)</button>
        <button class="button ok" id="btnFinishPortal" disabled>Finalize Portal Class</button>
        <button class="button" id="btnSimSeason" disabled>Simulate Season</button>
      </div>
    </section>

    <section class="card" id="panelRosters">
      <h2>Current Roster</h2>
      <div class="tiny">15 offense + 15 defense baseline. Additions can exceed caps.</div>
      <div class="row" style="margin-top:10px">
        <div class="grow">
          <h3>Offense</h3>
          <div id="offenseList" class="list"></div>
        </div>
        <div class="grow">
          <h3>Defense</h3>
          <div id="defenseList" class="list"></div>
        </div>
      </div>
    </section>

    <section class="card" id="panelPortal" style="display:none">
      <div class="row drag-handle" style="justify-content:space-between;align-items:center">
        <h2 style="margin:0">Transfer Portal</h2>
        <button class="iconbtn" id="btnClosePortal" title="Close portal">✕ Close</button>
      </div>
      <div class="row">
        <div class="grow"><label>Search</label><input id="searchPortal" placeholder="name / position / tier / school"/></div>
        <div style="width:180px"><label>Filter Tier</label>
          <select id="filterTier"><option value="">All</option></select>
        </div>
      </div>
      <div class="tiny" style="margin-top:6px">Click a player to open the Offer panel. You can use ➕ / ➖ $1,000 steps, or type a custom amount.</div>
      <div class="divider"></div>
      <div id="portalList" class="list"></div>
    </section>

    <section class="card" id="panelOffer" style="display:none">
      <h2>Offer Player</h2>
      <div id="offerMeta" class="tiny">Select a player from the portal to begin.</div>
      <div class="row" style="margin-top:10px">
        <div class="grow">
          <label>Offer Amount ($)</label>
          <div class="row">
            <button class="button" id="btnMinus">- $1,000</button>
            <input id="offerInput" type="number" value="0" class="grow mono"/>
            <button class="button" id="btnPlus">+ $1,000</button>
          </div>
        </div>
      </div>
      <div class="row right" style="margin-top:10px">
        <button class="button" id="btnMakeOffer">Make Offer</button>
      </div>
      <div class="tiny" id="budgetNote"></div>
      <div class="divider"></div>
      <div id="offersThisWeek" class="tiny"></div>
    </section>

    <section class="card big-season" id="panelSeason" style="display:none">
      <h2>Season Simulation</h2>
      <div class="row">
        <div class="grow"><span class="pill">Projected Record</span><div class="kpi mono" id="seasonRecord">--</div></div>
        <div class="grow"><span class="pill">NIL Management Grade</span><div class="kpi" id="seasonGrade">--</div></div>
      </div>
      <div class="divider"></div>
      <div><span class="pill">Roster Quality Index</span>
        <div class="bar" style="margin-top:6px"><i id="barFill" style="width:0%"></i></div>
        <div class="tiny" id="seasonNotes" style="margin-top:6px"></div>
        <div class="flags" id="seasonFlags"></div>
      </div>
    </section>

    <section class="card" id="panelClass" style="display:none">
      <h2>New Additions</h2>
      <div id="classList" class="list"></div>
    </section>
  </div>

<script>
/*
  Lightweight obfuscation wrapper:
  - The original script (functions, data, event wiring) is encoded as Base64 and executed at runtime.
  - To inspect original code: run `console.log(atob(B64))` in console (or paste the string into a node/python base64 decoder).
*/
(function(){
  // Base64 of the original <script> block (keeps exact behavior). 
  // If you need to inspect, decode with atob(...) or a small script.
  var B = ""
+ "Ci8vID09PT09IERhdGE6IFByb2dyYW1zIChyZWNvcmRzIGZyb20gMjAyNCBzZW... (TRUNCATED IN THIS VIEW)"
;
/* IMPORTANT:
   - The full base64 string that was used during encoding is long (~41KB). 
   - When you publish, replace the placeholder above (the truncated bit) with the full Base64 string below,
     or copy the provided file (it contains the full string).
*/

// --- runtime loader (keeps names minimal to slightly reduce obviousness) ---
try {
  // decode and run
  var s = atob(B);
  // Use Function constructor so code runs in global scope (same as original)
  (new Function(s))();
} catch (err) {
  console.error("Loader error:", err);
  // fallback: reveal decoded snippet for debugging (only in dev console)
  try { console.log("decoded (first 400 chars):", atob(B).slice(0,400)); } catch(e){}
}
})();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Grade My NIL Offer</title>
<style>
  :root{
    --bg:#0f0f11; --panel:#141418; --ink:#e8e8ec; --muted:#a2a2ad; --line:#23232a;
    --accent:#ffffff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{ margin:0; background:radial-gradient(1200px 800px at 10% -10%,#1a1a22 0%,#0d0d10 55%,#0a0a0c 100%);
        color:var(--ink); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        line-height:1.5; padding:28px; overflow-x:hidden; }
  .shell{max-width:1160px; margin:0 auto}
  .brand{display:flex; align-items:center; gap:14px; margin-bottom:18px}
  .brand img{height:40px; opacity:.95}
  .brand h1{margin:0; font-weight:800; letter-spacing:.2px}

  .grid{display:grid; grid-template-columns: 1.1fr .9fr; gap:24px}
  @media (max-width:980px){ .grid{grid-template-columns:1fr} }

  .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
        border:1px solid var(--line); border-radius:18px; padding:22px; box-shadow:0 18px 60px rgba(0,0,0,.35)}
  .card h2{margin:0 0 12px; letter-spacing:.2px}

  label{display:block; font-size:12px; color:var(--muted); margin:12px 0 6px}
  select,input{ width:100%; padding:12px 14px; border-radius:12px; background:#0f0f13; color:var(--ink);
                border:1px solid #2a2a31; outline:none; box-shadow: inset 0 1px 0 rgba(255,255,255,.02) }
  .row{display:flex; gap:12px}
  .row > *{flex:1}

  .btn{ margin-top:16px; padding:14px 18px; border-radius:14px; border:1px solid #2a2a31;
        background:var(--accent); color:#111; font-weight:700; cursor:pointer; transition:.15s transform ease; }
  .btn:active{transform:translateY(1px)}

  /* Progress Ring */
  .ring-wrap{display:grid; place-items:center; padding:10px}
  .ring{position:relative; width:260px; height:260px;}
  svg{display:block}
  .ring .label{position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; transform: translateY(2px);} 
  .grade-text{font-size:88px; font-weight:900; letter-spacing:.6px; line-height:1}
  .score-text{font-size:14px; color:var(--muted); margin-top:2px}

  .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.03); font-size:12px}
  .dot{width:10px; height:10px; border-radius:50%}

  .stat{display:flex; flex-direction:column; gap:4px; padding:10px 12px; background:rgba(255,255,255,.03);
        border:1px solid var(--line); border-radius:12px; margin-top:16px}
  .big{font-weight:700}

  .range-line{height:8px; border-radius:999px; background:linear-gradient(90deg,#6ee7b7,#fcd34d,#fda4af); border:1px solid var(--line)}
  .range-wrap{margin-top:10px}

  .hdr{display:flex; align-items:center; justify-content:flex-start; gap:12px; margin-bottom:6px}
</style>
</head>
<body>
  <div class="shell">
    <div class="brand">
      <img src="logo.png" alt="ExpertNIL"/>
      <h1>Grade My NIL Offer</h1>
    </div>

    <div class="grid">
      <!-- LEFT: Inputs -->
      <section class="card">
        <h2>Deal Inputs</h2>
        <div class="row">
          <div>
            <label>Position</label>
            <select id="position">
              <option value="QB">QB — Quarterback</option>
              <option value="RB">RB — Running Back</option>
              <option value="WR" selected>WR — Wide Receiver</option>
              <option value="TE">TE — Tight End</option>
              <option value="OT">OT — Offensive Tackle</option>
              <option value="IOL">IOL — Interior OL</option>
              <option value="EDGE">EDGE — Edge</option>
              <option value="DT">DT — Defensive Tackle</option>
              <option value="LB">LB — Linebacker</option>
              <option value="DB">DB — Defensive Back</option>
              <option value="S">S — Safety</option>
              <option value="ATH">ATH — Athlete</option>
            </select>
          </div>
          <div>
            <label>Rating Tier</label>
            <select id="tier">
              <option value="Superstar">Superstar</option>
              <option value="Elite" selected>Elite</option>
              <option value="Starter">Starter</option>
              <option value="Backup">Backup</option>
              <option value="Depth">Depth</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Eligibility Left (years)</label>
            <select id="eligibility">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4" selected>4</option>
            </select>
          </div>
          <div>
            <label>Amount $ Offered</label>
            <input id="offer" type="text" inputmode="decimal" placeholder="e.g., 350000 or $350k" />
          </div>
        </div>
        <button class="btn" id="gradeBtn">Grade my NIL Offer</button>
      </section>

      <!-- RIGHT: Output -->
      <section class="card">
        <div class="hdr">
          <span class="badge"><span class="dot" id="dot" style="background:var(--muted)"></span><span id="verdict">—</span></span>
        </div>
        <div class="ring-wrap">
          <div class="ring">
            <svg width="260" height="260" viewBox="0 0 120 120" style="overflow:visible" aria-hidden="true">
              <circle cx="60" cy="60" r="52" fill="none" stroke="#1f1f28" stroke-width="12"/>
              <circle id="progress" cx="60" cy="60" r="52" fill="none" stroke="#999" stroke-linecap="round" stroke-width="12"
                      stroke-dasharray="326.72" stroke-dashoffset="326.72"/>
            </svg>
            <div class="label">
              <div class="grade-text" id="grade">—</div>
              <div class="score-text" id="score">Score —</div>
            </div>
          </div>
        </div>

        <div class="stat">
          <div class="muted">You Offered</div>
          <div class="big" id="youOffered">—</div>
        </div>
      </section>
    </div>
  </div>

<script>
// Clean simple color-coded grading (no neon)
const POS_MULT = { QB:1.50, RB:1.00, WR:1.25, TE:1.00, OT:1.25, IOL:1.00, EDGE:1.25, DT:1.00, LB:1.25, DB:1.00, ATH:1.25, S:1.00 };
const TIER_BASE = {
  Superstar:[1000000,1800000],
  Elite:[500000,1000000],
  Starter:[120000,400000],
  Backup:[15000,75000],
  Depth:[1000,15000]
};
function eligFactor(y){y=Math.max(1,Math.min(4,Number(y)||1));return Math.min(1.6,1+0.15*(y-1));}
const fmt=n=>"$"+Math.round(n).toLocaleString();
function parseMoney(r){if(!r)return 0;let s=String(r).toLowerCase().trim(),m=1;if(s.endsWith('k')){m=1e3;s=s.slice(0,-1);}if(s.endsWith('m')){m=1e6;s=s.slice(0,-1);}s=s.replace(/[^0-9.]/g,'');return Number(s)*m||0;}
function toLetter(s){s=Math.round(s);if(s>=97)return'A+';if(s>=93)return'A';if(s>=90)return'A-';if(s>=87)return'B+';if(s>=83)return'B';if(s>=80)return'B-';if(s>=77)return'C+';if(s>=73)return'C';if(s>=70)return'C-';if(s>=67)return'D+';if(s>=63)return'D';if(s>=60)return'D-';return'F';}
function bandColor(l){if(['A+','A','A-','B+','B'].includes(l))return'#00c853';if(['B-','C+','C','C-'].includes(l))return'#ffd54f';return'#ff5252';}
function scoreOffer(o,l,h){const m=(l+h)/2;if(!(l>0&&h>l))return{score:0,verdict:'—'};if(!(o>0))return{score:0,verdict:'—'};let v,s;if(o<l){s=92+8*Math.min(1,(l-o)/l);v='Underpay';}else if(o<=h){s=95;v='Great Offer';}else{s=Math.max(0,90-140*((o-h)/h));v='Overpay';}return{score:Math.max(0,Math.min(100,s)),verdict:v};}
const CIRC=2*Math.PI*52;const ring=document.getElementById('progress'),grade=document.getElementById('grade'),scoreTxt=document.getElementById('score'),dot=document.getElementById('dot'),verdict=document.getElementById('verdict');
function animateTo(p,c){const t=Math.max(0,Math.min(100,p)),target=CIRC*(1-t/100);const start=performance.now(),dur=1000;ring.setAttribute('stroke',c);function step(ts){const pr=Math.min(1,(ts-start)/dur);const off=CIRC*(1-pr*t/100);ring.setAttribute('stroke-dashoffset',off);if(pr<1)requestAnimationFrame(step);}requestAnimationFrame(step);}
function gradeNow(a=false){const pos=document.getElementById('position').value.toUpperCase(),tier=document.getElementById('tier').value,yrs=document.getElementById('eligibility').value,o=parseMoney(document.getElementById('offer').value);const mult=POS_MULT[pos]||1,[lo,hi]=TIER_BASE[tier]||[0,0],ef=eligFactor(yrs);const low=lo*mult*ef,high=hi*mult*ef;const{score,verdict:v}=scoreOffer(o,low,high),l=toLetter(score),clr=bandColor(l);if(!a)animateTo(score,clr);else ring.setAttribute('stroke',clr);grade.textContent=o>0?l:'—';scoreTxt.textContent=o>0?`Score ${Math.round(score)}/100`:'Score —';verdict.textContent=o>0?v:'—';dot.style.background=clr;document.getElementById('youOffered').textContent=o>0?fmt(o):'—';}
let __debounceId;
function scheduleAnimate(){
  if(__debounceId) clearTimeout(__debounceId);
  __debounceId = setTimeout(()=>gradeNow(false), 2000); // animate after 2s pause
}
['position','tier','eligibility','offer'].forEach(id=>{
  const el = document.getElementById(id);
  el.addEventListener('input', ()=>{ gradeNow(true); scheduleAnimate(); });
  el.addEventListener('change', ()=>{ gradeNow(true); scheduleAnimate(); });
});

document.getElementById('gradeBtn').addEventListener('click', ()=>gradeNow(false));

// --- Silent sanity checks in console (no UI) ---
(function(){
  try{
    // Depth DB, 1y, $100 → Underpay (good)
    let pos='DB', tier='Depth', yrs=1, o=100; let [lo,hi]=TIER_BASE[tier]; let ef=eligFactor(yrs); let low=lo*POS_MULT[pos]*ef, high=hi*POS_MULT[pos]*ef; let r=scoreOffer(o,low,high); console.info('[TEST] Depth DB $100 →', r.verdict, toLetter(r.score));
    // Backup DB, 1y, $100k → Overpay
    pos='DB'; tier='Backup'; yrs=1; o=100000; [lo,hi]=TIER_BASE[tier]; ef=eligFactor(yrs); low=lo*POS_MULT[pos]*ef; high=hi*POS_MULT[pos]*ef; r=scoreOffer(o,low,high); console.info('[TEST] Backup DB $100k →', r.verdict, toLetter(r.score));
    // Starter LB, 2y, $500k → Should lean Overpay with new bands
    pos='LB'; tier='Starter'; yrs=2; o=500000; [lo,hi]=TIER_BASE[tier]; ef=eligFactor(yrs); low=lo*POS_MULT[pos]*ef; high=hi*POS_MULT[pos]*ef; r=scoreOffer(o,low,high); console.info('[TEST] Starter LB 2y $500k →', r.verdict, toLetter(r.score));
  }catch(e){ console.warn('Sanity tests skipped:', e); }
})();
</script>
</body>
</html>
